\section{Homogeneous prime spectra}
\label{section:2.2}

\subsection{Generalities on graded rings and modules}
\label{subsection:2.2.1}

\begin{notation}[2.1.1]
\label{2.2.1.1}
Given a ring $S$ \emph{graded} in positive degrees, we denote by $S_n$ the subset of $S$ consisting of homogeneous elements of degree $n$ ($n\geq 0$), by $S_+$ the (direct) sum of the $S_n$ for $n>0$;
we have $1\in S_0$, $S_0$ is a subring of $S$, $S_+$ is a graded ideal of $S$, and $S$ is the direct sum of $S_0$ and $S_+$.
If $M$ is a \emph{graded} module over $S$ (with positive or negative degrees), we similarly denote by $M_n$ the $S_0$-module consisting of homogeneous elements of $M$ of degree $n$ (with $n\in\bb{Z}$).

For every integer $d>0$, we denote by $S^{(d)}$ the direct sum of the $S_{nd}$;
by considering the elements of $S_{nd}$ as homogeneous of degree $n$, the $S_{nd}$ define on $S^{(d)}$ a graded ring structure.

For every integer $k$ such that $0\leq k\leq d-1$, we denote by $M^{(d,k)}$ the direct sum
\oldpage[II]{20}
of the $M_{nd+k}$ ($n\in\bb{Z}$);
this is a graded $S^{(d)}$-module when we consider the elements of $M_{nd+k}$ as homogeneous of degree $n$.
We write $M^{(d)}$ in place of $M^{(d,0)}$.

With the above notation, for every integer $n$ (positive or negative), we denote by $M(n)$ the graded $S$-module defined by $(M(n))_k=M_{n+k}$ for every $k\in\bb{Z}$.
In particular, $S(n)$ will be a graded $S$-module such that $(S(n))_k=S_{n+k}$, by agreeing to set $S_n=0$ for $n<0$.
We say that a graded $S$-module $M$ is \emph{free} if it is isomorphic, considered as a \emph{graded} module, to a direct sum of modules of the form $S(n)$;
as $S(n)$ is a monogeneous $S$-module, generated by the element $1$ of $S$ considered as an element of degree $-n$, it is equivalent to say that $M$ admits a \emph{basis} over $S$ consisting of \emph{homogeneous} elements.

We say that a graded $S$-module $M$ \emph{admits a finite presentation} if there exists an exact sequence $P\to Q\to M\to 0$, where $P$ and $Q$ are finite direct sums of modules of the form $S(n)$ and the homomorphisms are of degree $0$ (cf.~\sref{2.2.1.2}).
\end{notation}

\begin{env}[2.1.2]
\label{2.2.1.2}
Let $M$ and $N$ be two graded $S$-modules;
we define on $M\otimes_S N$ a \emph{graded} $S$-module structure in the following way.
On the tensor product $M\otimes_\bb{Z}N$, we can define a graded $\bb{Z}$-module structure (where $\bb{Z}$ is graded by $\bb{Z}_0=\bb{Z}$, $\bb{Z}_n=0$ for $n\neq 0$) by setting $(M\otimes_\bb{Z}N)_q=\bigoplus_{m+n=q}M_n\otimes_\bb{Z}N_n$ (as $M$ and $N$ are respectively direct sums of the $M_n$ and the $N_n$, we know that we can canonically identify $M\otimes_\bb{Z}N$ with the direct sum of all the $M_n\otimes_\bb{Z}N_n$).
This being so, we have $M\otimes_S N=(M\otimes_\bb{Z}N)/P$, where $P$ is the $\bb{Z}$-submodule of $M\otimes_\bb{Z}N$ generated by the elements $(xs)\otimes y-x\otimes(sy)$ for $x\in M$, $y\in N$, $s\in S$;
it is clear that $P$ is a \emph{graded} $\bb{Z}$-submodule of $M\otimes_\bb{Z}N$, and we see immediately that we obtain a graded $S$-module structure on $M\otimes_S N$ by passing to the quotient.

For two graded $S$-modules $M$ and $N$, recall that a homomorphism $u:M\to N$ of $S$-modules is said to be \emph{of degree $k$} if $u(M_j)\subset N_{j+k}$ for all $j\in\bb{Z}$.
If $H_n$ denotes the set of all the homomorphisms of degree $n$ from $M$ to $N$, then we denote by $\Hom_S(M,N)$ the (direct) \emph{sum} of the $H_n$ ($n\in\bb{Z}$) in the $S$-module $H$ of all the homomorphisms (of $S$-modules) from $M$ to $N$;
in general, $\Hom_S(M,N)$ is not equal to the later.
However, we have $H=\Hom_S(M,N)$ when $M$ is \emph{of finite type};
indeed, we can then suppose that $M$ is generated by a finite number of homogeneous elements $x_i$ ($1\leq i\leq n$), and every homomorphism $u\in H$ can be written in a unique way as $\sum_{k\in\bb{Z}}u_k$, where for each $k$, $u_k(x_i)$ is equal to the homogeneous component of degree $k+\deg(x_i)$ of $u(x_i)$ ($1\leq i\leq n$), which implies that $u_k=0$ except for a finite number of indices;
we have by definition that $u_k\in H_k$, hence the conclusion.

We say that the elements of degree $0$ of $\Hom_S(M,N)$ are the \emph{homomorphisms of graded $S$-modules}.
It is clear that $S_n H_n\subset H_{m+n}$, so the $H_n$ define on $\Hom_S(M,N)$ a graded $S$-module structure.

It follows immediately from these definitions that we have
\[
\label{2.2.1.2.1}
  M(m)\otimes_S N(n)=(M\otimes_S N)(m+n),
  \tag{2.1.2.1}
\]
\[
\label{2.2.1.2.2}
  \Hom_S(M(m),N(n))=(\Hom_S(M,N))(n-m),
  \tag{2.1.2.2}
\]
for two graded $S$-modules $M$ and $N$.

\oldpage[II]{21}
Let $S$ and $S'$ be two graded rings;
a homomorphism of \emph{graded rings $\vphi:S\to S'$} is a homomorphism of rings such that $\vphi(S_n)\subset S_n'$ for all $n\in\bb{Z}$ (in other words, $\vphi$ must be a homomorphism \emph{of degree $0$} of graded $\bb{Z}$-modules).
The data of such a homomorphism defines on $S'$ a \emph{graded} $S'$-module structure;
equipped with this structure and its graded ring structure, we say that $S'$ is a \emph{graded $S'$-algebra}.

If $M$ is also a graded $S$-module, then the tensor product $M\otimes_S S'$ of \emph{graded} $S$-modules is equipped in a natural way with a \emph{graded} $S'$-module structure, the grading being defined as above.
\end{env}

\begin{lemma}[2.1.3]
\label{2.2.1.3}
Let $S$ be a ring graded in positive degrees.
For a subset $E$ of $S_+$ consisting of homogenous elements to generate $S_+$ as an $S$-module, it is neccessary and sufficient for $E$ to generate $S$ as an $S_0$-algebra.
\end{lemma}

\begin{proof}
\label{proof-2.2.1.3}
The condition is evidently sufficient; we show that ot os necessary.
Let $E_n$ (resp. $E^n$) be the set of elements of $E$ of degree equal to $n$ (resp. $\leq n$);
it suffices to show, by induction on $n>0$, that $S_n$ is the $S_0$-module generated by the elements of degree $n$ which are products of elements of $E^n$.
Now, it is evident that for $n=1$ by virtue of the hypothesis;
the latter also shows that $S_n=\sum_{p=0}^{n-1}S_p E_{n-p}$,
and the induction argument is then immediate.
\end{proof}

\begin{corollary}
\label{2.2.1.4}
For $S_+$ to be an ideal of finite type, it is necessary and sufficient for $S$ to be an $S_0$-algebra of finite type.
\end{corollary}

\begin{proof}
\label{proof-2.2.1.4}
We can always assume that a finite system of generators of the $S_0$-algebra $S$ (resp. of the $S$-ideal $S_+$) is formed by homogeneous elements, by replacing each of the generators considered by their homogeneous components.
\end{proof}

\begin{corollary}[2.1.5]
\label{2.2.1.5}
For $S$ to be Noetherian, it is necessary and sufficient for $S_0$ to be Noetherian and for $S$ to be an $S_0$-algebra of finite type.
\end{corollary}

\begin{proof}
\label{proof-2.2.1.5}
The condition is evidently sufficient; is it necessary, since $S_0$ is isomorphic to $S/S_+$ and $S_+$ must be an ideal of finite type \sref{2.2.1.4}.
\end{proof}

\begin{lemma}[2.1.6]
\label{2.2.1.6}
Let $S$ be a ring graded in positive degrees, which is an $S_0$-algebra of finite type.
Let $M$ be a graded $S$-module of finite type.
Then:
\begin{enumerate}
  \item[{\rm(i)}] The $M_n$ are $S_0$-modules of finite type, and there exists an integer $n_0$ such that $M_n=0$ for $n\leq n_0$.
  \item[{\rm(ii)}] There exists an integer $n_1$ and an integer $h>0$ such that, for every integer $n\geq n_1$, we have $M_{n+h}=S_h M_n$.
  \item[{\rm(iii)}] For every pair of integers $(d,k)$ such that $d>0$, $0\leq k\leq d-1$, $M^{(d,k)}$ is an $S^{(d)}$-module of finite type.
  \item[{\rm(iv)}] For every integer $d>0$, $S^{(d)}$ is an $S_0$-algebra of finite type.
  \item[{\rm(v)}] There exists an integer $h>0$ such that $S_{mh}=(S_h)^m$ for all $m>0$.
  \item[{\rm(vi)}] For every integer $n>0$, there exists an integer $m_0$ such that $S_m\subset S_+^n$ for all $m\geq m_0$.
\end{enumerate}
\end{lemma}

\begin{proof}
\label{proof-2.2.1.6}
We can assume that $S$ is generated (as an $S_0$-algebra) by homogeneous elements $f_i$, of degrees $h_i$ ($1\leq i\leq r$), and $M$ generated (as an $S$-module) by homogeneous elements $x_j$ of degrees $k_j$ ($1\leq j\leq s$).
It is clear that $M_n$ is formed by
\oldpage[II]{22}
linear combinations, with coefficients in $S_0$, of elements $f_1^{\alpha_1}\cdots f_r^{\alpha_r}x_j$ such that the $\alpha_i$ are integers $\geq 0$ satisfying $k_j+\sum_i\alpha_i h_i=n$;
for each $j$, there is a finite number of systems $(\alpha_i)$ satisfying this equation, since the $h_i$ are $>0$, hence the first assertion of (i);
the second is evident.
Let $h$ be the l.c.m. of the $h_i$ and set $g_i=f_i^{h/h_i}$ ($1\leq i\leq r$) such that all the $g_i$ are of degree $h$;
let $z_\mu$ be the elements of $M$ of the form $f_1^{\alpha_1}\cdots f_r^{\alpha_r}x_j$ with $0\leq\alpha_i<h/h_i$ for $1\leq i\leq r$;
there are finitely many of these elements, and let $n_1$ be the largest of their degrees.
It is clear that for $n\geq n_1$, every element of $M_{n+h}$ is a linear combination of the $z_\mu$ whose coefficients are monomials of degree $>0$ with respect to $g_i$, so we have $M_{n+h}=S_h M_n$, which establishes (ii).
In a similar way, we see (for all $d>0$) that an element of $M^{(d,k)}$ is a linear combination, with coefficients in $S_0$, of elements of the form $g^d f_1^{\alpha_1}\cdots f_r^{\alpha_r}x_j$ with $0\leq\alpha_i<d$, $g$ a homogeneous element of $S$;
hence (iii);
(iv) then follows from (iii) and Lemma~\sref{2.2.1.3}, by taking $M=S_+$, since $(S_+)^{(d)}=(S^{(d)})_+$.
The assertion of (v) follows from (ii) by taking $M=S$.
Finally, for a given $n$, there is a finite number of systems $(\alpha_i)$ such that $\alpha_i\geq 0$ and $\sum_i\alpha_i<n$, so if $m_0$ is the largest value of the sum $\sum_i\alpha_i h_i$ of these systenms, then we have $S_m\subset S_+^n$ for $m>m_0$, which proves (vi).
\end{proof}

\begin{corollary}[2.1.7]
\label{2.2.1.7}
If $S$ is Noetherian, then so is $S^{(d)}$ for every integer $d>0$.
\end{corollary}

\begin{proof}
\label{proof-2.2.1.7}
This follows from \sref{2.2.1.5} and \sref{2.2.1.6}[iv].
\end{proof}

\begin{env}[2.1.8]
\label{2.2.1.8}
Let $\mathfrak{p}$ be a \emph{graded} prime ideal of the graded ring $S$;
$\mathfrak{p}$ is thus a direct sum of the subgroups $\mathfrak{p}_n=\mathfrak{p}\cap S_n$.
Suppose that \emph{$\mathfrak{p}$ does not contain $S_+$}.
Then if $f\in S_+$ is not in $\mathfrak{p}$, the relation $f^n x\in\mathfrak{p}$ is equivalent to $x\in\mathfrak{p}$;
in particular, if $f\in S_d$ ($d>0$), for all $x\in S_{m-nd}$, then the relation $f^n x\in\mathfrak{p}_m$ is equivalent to $x\in\mathfrak{p}_{m-nd}$.
\end{env}

\begin{proposition}[2.1.9]
\label{2.2.1.9}
Let $n_0$ be an integer $>0$;
for all $n\geq n_0$, let $\mathfrak{p}_n$ be a subgroup of $S_n$.
For there to exist a graded prime ideal $\mathfrak{p}$ of $S$ not containing $S_+$ and such that $\mathfrak{p}\cap S_n=\mathfrak{p}_n$ for all $n\geq n_0$, it is necessary and sufficient for the following coniditions to be satisfied:
\begin{enumerate}
  \item[{\rm(1st)}] $S_m\mathfrak{p}_n\subset\mathfrak{p}_{m+n}$ for all $m\geq 0$ and all $n\geq n_0$.
  \item[{\rm(2nd)}] For $m\geq n_0$, $n\geq n_0$, $f\in S_m$, $g\in S_n$, the relation $fg\in\mathfrak{p}_{m+n}$ implies $f\in\mathfrak{p}_m$ or $g\in\mathfrak{p}_n$.
  \item[{\rm(3rd)}] $\mathfrak{p}_n\neq S_n$ for at least one $n\geq n_0$.
\end{enumerate}
In addition, the graded prime ideal $\mathfrak{p}$ is then unique.
\end{proposition}

\begin{proof}
\label{proof-2.2.1.9}
It is evident that the conditions (1st) and (2nd) are necessary.
In addition, if $\mathfrak{p}\not\supset S_+$, then there exists at least one $k>0$ such that $\mathfrak{p}\cap S_k\neq S_k$;
if $f\in S_k$ is not in $\mathfrak{p}$, the relation $\mathfrak{p}\cap S_n=S_n$ implies $\mathfrak{p}\cap S_{n-mk}=S_{n-mk}$ according to \sref{2.2.1.8};
therefore, if $\mathfrak{p}\cap S_n=S_n$ for a certain value of $n$, we would have $\mathfrak{p}\supset S_+$ contrary to the hypothesis, which proves that (3rd) is necessary.
Conversely, suppose that the conditions (1st), (2nd), and (3rd) are satisfied.
Note that if for an integer $d\geq n_0$, $f\in S_d$ is not in $\mathfrak{p}_d$, then, if $\mathfrak{p}$ exists, $\mathfrak{p}_m$, for $m<n_0$, is necessarily equal to the set of the $x\in S_m$ such that $f^r x\in\mathfrak{p}_{m+rd}$, except for a finite number of values of $r$.
This already proves that if $\mathfrak{p}$ exists, then it is unique.
It remains to show that if we define the $\mathfrak{p}_m$ for $m<n_0$ by the previous condition, then $\mathfrak{p}=\sum_{n=0}^\infty\mathfrak{p}_n$ is a prime ideal.
First, note that by virtue of (2nd), for $m\geq n_0$, $\mathfrak{p}_m$ is also defined as the set of the $x\in S_m$ such that $f^r x\in\mathfrak{p}_{m+rd}$ except for a finite number of values of $r$.
This
\oldpage[II]{23}
being so, if $g\in S_m$, $x\in\mathfrak{p}_n$, then we have $f^r gx\in\mathfrak{p}_{m+n+rd}$ except for a finite number of values of $r$, so $gx\in\mathfrak{p}_{m+n}$, which proves that $\mathfrak{p}$ is an ideal of $S$.
To establish that this ideal is prime, in other words that the ring $S/\mathfrak{p}$, graded by the subgroups $S_n/\mathfrak{p}_n$, is an integral domain, it suffices (by considering the components of higher degree of two elements of $S/\mathfrak{p}$) to prove that if $x\in S_m$ and $y\in S_n$ are such that $x\not\in\mathfrak{p}_m$ and $y\not\in\mathfrak{p}_n$, then $xy\not\in\mathfrak{p}_{m+n}$.
If not, for $r$ large enough, we would have $f^{2r}xy\in\mathfrak{p}_{m+n+2rd}$;
but we have $f^r y\not\in\mathfrak{p}_{n+rd}$ for all $r>0$;
it then follows from (2nd) that, except for a finite number of values of $r$, we have $f^r x\in\mathfrak{p}_{m+rd}$, and we conclude that $x\in\mathfrak{p}_m$ contrary to the hypothesis.
\end{proof}

\begin{env}[2.1.10]
\label{2.2.1.10}
We say that a subset $\mathfrak{J}$ of $S_+$ is an \emph{ideal of $S_+$} if it is an ideal of $S$, and $\mathfrak{J}$ is a \emph{graded prime ideal of $S_+$} if it is the intersection of $S_+$ and a graded prime ideal of $S$ \emph{not containing $S_+$} (this prime ideal is also unique according to Proposition \sref{2.2.1.9}).
If $\mathfrak{J}$ is an ideal of $S_+$, the \emph{radical of $\mathfrak{J}$ in $S_+$} is the set of elements of $S_+$ which have a power in $\mathfrak{J}$, in other words the set $\rad_+(\mathfrak{J})=\rad(\mathfrak{J})\cap S_+$;
in particular, the radical of $0$ in $S_+$ is then called the \emph{nilradical} of $S_+$ and denoted by $\nilrad_+$: this is the set of nilpotent elements of $S_+$.
If $\mathfrak{J}$ is an \emph{graded} ideal of $S_+$, then its radical $\rad_+(\mathfrak{J})$ is a \emph{graded} ideal: by passing to the quotient ring $S/\mathfrak{J}$, we can reduce to the case $\mathfrak{J}=0$, and it remains to see that if $x=x_h+x_{h+1}+\cdots+x_k$ is nilpotent, then so are the $x_i\in S_i$ ($1\leq h\leq i\leq k$);
we can assume $x_k\neq 0$ and the component of highest degree of $x^n$ is then $x_k^n$, hence $x_k$ is nilpotent, and we then argue by induction on $k$.
We say that the graded ring $S$ is \emph{essentially reduced} if $\nilrad_+=0$, in other words, if $S_+$ does not contain nilpotent elements $\neq 0$.
\end{env}

\begin{env}[2.1.11]
\label{2.2.1.11}
We note that if, in the graded ring $S$, an element $x$ is a zero-divisor, then so is its component of highest degree.
We say that a ring $S$ is \emph{essentially integral} if the ring $S_+$ (\emph{without the unit element}) does not contain a zero-divisor and is $\neq 0$;
it suffices that a homogeneous element $\neq 0$ in $S_+$ is not a zero-divisor in this ring.
It is clear that if $\mathfrak{p}$ is a graded prime ideal of $S_+$, then $S/\mathfrak{p}$ is essentially integral.

Let $S$ be an essentially integral graded ring, and let $x_0\in S_0$:
if there then exists \emph{a} homogeneous element $f\neq 0$ of $S_+$ such that $x_0 f=0$, then we have $x_0 S_+=0$, since we have $(x_0 g)f=(x_0 f)g=0$ for all $g\in S_+$, and the hypothesis thus implies $x_0 g=0$.
For $S$ to be integral, it is necessary and sufficient for $S_0$ to be integral and the annihilator of $S_+$ in $S_0$ to be $0$.
\end{env}

\subsection{Rings of fractions of a graded ring}
\label{subsection:2.2.2}

\begin{env}[2.2.1]
\label{2.2.2.1}
Let $S$ be a graded ring, in positive degrees, $f$ a \emph{homogeneous} element of $S$, of degree $d>0$;
then the ring of fractions $S'=S_f$ is graded, taking for $S_n'$ the set of the $x/f^k$, where $x\in S_{n+kd}$ with $k\geq 0$ (we observe here that $n$ can take arbitrary negative values);
we denote the subring $S_0'=(S_f)_0$ of $S'$ consisting of elements \emph{of degree $0$} by the notation $S_{(f)}$.

If $f\in S_d$, then the monomials $(f/1)^h$ in $S_f$ ($h$ a positive or negative integer) form a \emph{free system} over the ring $S_{(f)}$, and the set of their linear combinations is none other than
\oldpage[II]{24}
the ring $(S^{(d)})_f$, which is thus \emph{isomorphic to $S_{(f)}[T,T^{-1}]=S_{(f)}\otimes_\bb{Z}\bb{Z}[T,T^{-1}]$} (where $T$ is an indeterminate).
Indeed, if we have a relation $\sum_{h=-a}^b z_h(f/1)^h=0$ with $z_h=x_h/f^m$, where the $x_h$ are in $S_{md}$, then this relation is equivalent by definition to the existence of a $k>-a$ such that $\sum_{h=-a}^b f^{h+k}x_h=0$, and as the degrees of the terms of this sum are distinct, we have $f^{h+k}x_h=0$ for all $h$, hence $z_h=0$ for all $h$.

If $M$ is a graded $S$-module, then $M'=M_f$ is a graded $S_f$-module, $M_n'$ being the set of the $z/f^k$ with $z\in M_{n+kd}$ ($k\geq 0$);
we denote by $M_{(f)}$ the set of the homomogenous elements of degree $0$ of $M'$;
it is immediate that $M_{(f)}$ is an $S_{(f)}$-module and that we have $(M^{(d)})_f=M_{(f)}\otimes_{S_{(f)}}(S^{(d)})_f$.
\end{env}

\begin{lemma}[2.2.2]
\label{2.2.2.2}
Let $d$ and $e$ be integers $>0$, $f\in S_d$, $g\in S_e$.
There exists a canonical ring isomorphism
\[
  S_{(fg)}\isoto(S_{(f)})_{g^d/f^e}.
\]
\end{lemma}








